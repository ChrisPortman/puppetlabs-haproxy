# This file managed by Puppet
<%- if @data -%>
<%- if @data['base'] -%>
# Global and default Configuration
<%= @data['base'] %>
<%- end -%>

<%- if @data['frontends'] -%>
# Frontends
<%- @data['frontends'].keys.sort.each do |f| -%>
<%- config = @data['frontends'][f] -%>
<%= config['config'] %>
<%- config['acls'].sort.each do |a| -%>
<%= a %>
<%- end -%>
<%- end -%>
<%- end -%>

<%- if @data['listening_services'] -%>
# Listens and Backends
<%- @data['listening_services'].keys.sort.each do |l| -%>
<%- config = @data['listening_services'][l] -%>
<%= config['config'] %>
<%- config['members'].sort.each do |m| -%>
<%= m %>
<%- end -%>
<%- end -%>
<%- end -%>

<%- if @data['peers'] -%>
# Peers
<%- @data['peers'].keys.sort.each do |p| -%>
<%- config = @data['peers'][p] -%>
<%= config['config'] %>
<%- config['members'].sort.each do |m| -%>
<%= m %>
<%- end -%>
<%- end -%>
<%- end -%>

<%- if @data['userlists'] -%>
# Userlists
<%- @data['userlists'].keys.sort.each do |u| -%>
<%- config = @data['userlists'][u] -%>
<%= config['config'] %>
<%- end -%>
<%- end -%>
<%- end -%>
